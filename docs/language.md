# Язык WinFlow (MVP)

Этот документ описывает минимальный синтаксис, реализованный в текущем прототипе, и очерчивает план расширения.

## Файл скрипта
- Кодировка: UTF-8
- Расширение: `.wflow`

## Комментарии и пустые строки
- `// ...` или `# ...` — комментарии строки
- Пустые строки игнорируются

## Команды (MVP)
- `echo <text>` — печать текста в лог. `<text>` может быть без кавычек или в одинарных/двойных кавычках
- `noop` — ничего не делает, полезно для отладки/заглушек
- `env set name=FOO value=bar` — установить переменную окружения рантайма
- `env unset name=FOO` — удалить переменную из контекста
- `env print` — вывести все переменные контекста
- `file write path="out.txt" content="Hello"` — записать файл (отн. пути — относительно workingDirectory)
- `file append path="out.txt" content="World"` — дописать в файл

Пример:

```text
echo "Hello"
noop
echo Done
```

## Модель исполнения
- Все команды файла объединяются в один `Task` с именем файла (без расширения)
- Внутри — один `Step`, в котором команды выполняются сверху вниз
- Режим `--dry-run` печатает команды без выполнения
  - Для файловых команд печатается действие вместо записи

## Ошибки парсинга
- Неизвестная команда → ошибка с номером строки
- Будущие проверки: обязательные аргументы, валидация типов

---

# План расширения синтаксиса

## Секции
```text
task build:
  step:
    echo "Build start"
```
- Допускается несколько `task` в одном файле
- Возможен выбор задачи по имени через аргументы CLI

## Аргументы команд
```text
file write path="out.txt" content="Hello"
process run file="cmd.exe" args="/c echo hi"
```
- Формат: `key=value`, значения в кавычках для пробелов

## Переменные и контекст
```text
env set NAME="World"
echo "Hello ${NAME}!"
```
- Источники: локальные переменные, ENV, параметры CLI
- Подстановки: `${VAR}`

## Управление потоком
- `if`, `for`, `include` — позже, после стабилизации базовых модулей
